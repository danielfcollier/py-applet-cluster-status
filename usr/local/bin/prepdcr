#!/bin/bash
# Script para chamar o prepdcr de forma mais fácil
#  Entrada: txt_file prefix initial_number final_number
#
# Fernando S. Pacheco
# (C) 2004 LINSE-UFSC

# ------------------------------------------------------
# Argument check
ARGS=4
E_BADARGS=65

if [ $# -ne "$ARGS" ]
then
  echo "Usage: `basename $0` txt_file prefix initial_number final_number"
  exit $E_BADARGS
fi
# ------------------------------------------------------

txtfile=$1
prefix=$2
initi=$3
final=$4

#funcao para mascarar zeros para completar 4 caracteres
maskr () 
{
if [[ $1 -lt 10 ]]
then
	mask=000
elif [[ $1 -lt 100 ]]
then
	mask=00
elif [[ $1 -lt 1000 ]]
then
	mask=0
fi
echo $mask$1
}

dcrfile=$prefix\_`maskr $initi`\_`maskr $final`.dcr

# ajuste para evitar problemas com indices negativos
if [[ $initi -lt 6 ]]
then
	let "initi = 6"
fi

# arquivos DCR incluem 5 frases a mais no inicio e 5 no fim
echo Executando: prepdcr $txtfile `expr $initi - 5` `expr $final + 5` $dcrfile
prepdcr $txtfile `expr $initi - 5` `expr $final + 5` $dcrfile

echo Numero de frases \(aprox.\) no arq. DCR: `grep frase $dcrfile | wc -l`
#------
